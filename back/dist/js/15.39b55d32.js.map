{"version":3,"file":"js/15.39b55d32.js","mappings":"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","sources":["webpack://front/./src/views/permission/Index.vue","webpack://front/./src/views/permission/constructorTree.js","webpack://front/./src/components/roleitem/RoleItem.vue","webpack://front/src/components/roleitem/RoleItem.vue","webpack://front/./src/components/roleitem/RoleItem.vue?8ecc","webpack://front/./src/components/roleitem/RoleItem.vue?2b57","webpack://front/./src/components/page-drawerf/PageDrawer.vue","webpack://front/src/components/page-drawerf/PageDrawer.vue","webpack://front/./src/components/page-drawerf/PageDrawer.vue?b1ac","webpack://front/./src/components/page-drawerf/PageDrawer.vue?078f","webpack://front/./src/views/permission/tree.config.js","webpack://front/src/views/permission/Index.vue","webpack://front/./src/views/permission/Index.vue?823e","webpack://front/./src/views/permission/Index.vue?48b1"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',{staticClass:\"container\"},[_c('PageDrawer',{ref:\"drawer\",attrs:{\"page-list\":_vm.pageList},on:{\"onPageChange\":_vm.onPageChange}}),_c('el-aside',{attrs:{\"width\":\"225px\"}},_vm._l((_vm.roleList),function(role){return _c('RoleItem',{key:role.id,class:{active:role.id === _vm.current.id},attrs:{\"role\":role},on:{\"onRoleChange\":_vm.onRoleChange}})}),1),_c('el-main',[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(_vm._s(_vm.currentPage))]),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\",\"margin-left\":\"30px\",\"color\":\"green\"},attrs:{\"type\":\"text\"},on:{\"click\":_vm.onSave}},[_vm._v(\"保存\")]),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.$refs.drawer.show()}}},[_vm._v(\"切换页面\")]),(_vm.current.tree)?_c('el-switch',{staticStyle:{\"float\":\"right\"},model:{value:(_vm.currentRender.show),callback:function ($$v) {_vm.$set(_vm.currentRender, \"show\", $$v)},expression:\"currentRender.show\"}}):_vm._e()],1),(_vm.current.page)?_c('div',{staticClass:\"box\"},[_vm._l((_vm.current.page),function(list,title){return [(title!== 'show')?_c('div',{key:title,staticClass:\"fied\"},[_c('span',{staticClass:\"title\"},[_vm._v(_vm._s(title))]),_vm._l((list.config),function(value,key){return _c('div',{key:key,staticClass:\"item\"},[_c('span',[_vm._v(_vm._s(key))]),_c('div',{staticClass:\"f_r\"},[(!list.isButton)?[_c('el-checkbox',{model:{value:(_vm.currentRender[title][key].show),callback:function ($$v) {_vm.$set(_vm.currentRender[title][key], \"show\", $$v)},expression:\"currentRender[title][key].show\"}},[_vm._v(\"显示\")]),_c('el-checkbox',{model:{value:(_vm.currentRender[title][key].write),callback:function ($$v) {_vm.$set(_vm.currentRender[title][key], \"write\", $$v)},expression:\"currentRender[title][key].write\"}},[_vm._v(\"写\")])]:[_c('el-switch',{model:{value:(_vm.currentRender[title][key].show),callback:function ($$v) {_vm.$set(_vm.currentRender[title][key], \"show\", $$v)},expression:\"currentRender[title][key].show\"}},[_vm._v(\"显示\")])]],2)])})],2):_vm._e()]})],2):_vm._e()])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @param {*} firstPage 页面具体配置  permissionTree[首页] 是个value\n * @return 不含show write 仅用于页面展示\n */\nexport function constructPageViewTrees(firstPage) {\n  const keys = Object.keys(firstPage)\n  const res = { }\n  keys.forEach(key => {\n    const item = firstPage[key]\n    const tree = array2objRecursive(item.config)\n    res[key] = { ...item }\n    res[key]['config'] = tree\n  })\n  return res\n}\n\n// 递归将数组，根据name 转化为对象\nfunction array2objRecursive(config, res = {}) {\n  if (Array.isArray(config)) {\n    config.forEach(item => {\n      array2objRecursive(item, res)\n    })\n  } else if (typeof config === 'object' && config !== null) {\n    res[config.name] = {}\n  }\n  return res\n}\n\n// 构建用于提交至服务器的树，含show，false\n// 构建的是当前页面的树\nexport function constructFullTreeByPageName(config, t_or_f) {\n  const res = {}\n  for (const k in config) {\n    const page = config[k]\n    res[k] = buildTreeRecursive(page, t_or_f)\n    res[k].show = t_or_f\n    res[k].write = t_or_f\n  }\n\n  return res\n}\n\n// 递归给所有页面配置show write\nfunction buildTreeRecursive(page, t_or_f, res = {}) {\n  if (Array.isArray(page)) {\n    page.forEach(item => buildTreeRecursive(item, t_or_f, res))\n  } else if (typeof page === 'object' && page !== null) {\n    if (page.name) {\n      res[page.name] = {\n        show: t_or_f,\n        write: t_or_f\n      }\n    } else {\n      for (const key in page) {\n        res[key] = {\n          show: t_or_f,\n          write: t_or_f\n        }\n        buildTreeRecursive(page[key].config, t_or_f, res[key])\n      }\n    }\n  }\n  return res\n}\n\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"role_item\"},[_c('div',{staticClass:\"wrapper\",on:{\"click\":function($event){return _vm.onRoleChange(_vm.role)}}},[_c('div',[_vm._v(_vm._s(_vm.role.username))]),_c('div',{staticClass:\"desc\"},[_vm._v(_vm._s(_vm.role.desc))])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"role_item \">\n    <div class=\"wrapper\" @click=\"onRoleChange(role)\">\n      <div>{{role.username}}</div>\n      <div class=\"desc\">{{role.desc}}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  // ComponentName 首字母大写的驼峰命名\n  name: 'RoleItem',\n  // 组件\n  components: {},\n  props: {\n    role: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  // 变量\n  data() {\n    return {}\n  },\n  // 计算属性\n  computed: {},\n  // 监控data中的数据变化\n  watch: {},\n  // 生命周期 - 创建完成(可以访问当前this实例)\n  created() {},\n  // 生命周期 - 挂载完成(可以访问dom元素)\n  mounted() {},\n  // 方法\n  methods: {\n    onRoleChange(role) {\n      this.$emit('onRoleChange', role)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n$bgc:#eef1f6;\n$act_bgc:#e3eafd;\n$hover_bgc:#f5f7fa;\n\n.active {\n  background-color: $act_bgc!important;\n}\n.role_item {\n    height: 68px;\n    padding: 10px;\n    font-size: 14px;\n    background-color: $bgc;\n    border-bottom: 1px solid #e7e7e7;\n\n    .wrapper {\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        justify-content: space-around;\n        cursor: pointer;\n\n        .desc {\n            color: #999;\n        }\n    }\n\n    &:hover {\n        background-color: $hover_bgc;\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RoleItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RoleItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoleItem.vue?vue&type=template&id=4b9284f2&scoped=true&\"\nimport script from \"./RoleItem.vue?vue&type=script&lang=js&\"\nexport * from \"./RoleItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoleItem.vue?vue&type=style&index=0&id=4b9284f2&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4b9284f2\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-drawer',{attrs:{\"title\":\"我是标题\",\"visible\":_vm.drawer},on:{\"update:visible\":function($event){_vm.drawer=$event}}},[(_vm.pageList.length)?_vm._l((_vm.pageList),function(item){return _c('div',{key:item,staticClass:\"container\"},[_c('span',[_vm._v(\" \"+_vm._s(item))]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.onPageChange(item)}}},[_vm._v(\"选择\")])],1)}):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-drawer\n    title=\"我是标题\"\n    :visible.sync=\"drawer\"\n  >\n    <template v-if=\"pageList.length\">\n      <div class=\"container\" v-for=\"item of pageList\" :key=\"item\">\n        <span> {{item}}</span>\n        <el-button type=\"primary\" size=\"mini\" @click=\"onPageChange(item)\">选择</el-button>\n      </div>\n    </template>\n  </el-drawer>\n</template>\n\n<script>\nexport default {\n  // ComponentName 首字母大写的驼峰命名\n  name: 'PageDrawer',\n  props: {\n    pageList: {\n      type: Array,\n      default: () => []\n    }\n  },\n  // 组件\n  components: {},\n  // 变量\n  data() {\n    return {\n      drawer: false\n    }\n  },\n  // 计算属性\n  computed: {},\n  // 监控data中的数据变化\n  watch: {},\n  // 生命周期 - 创建完成(可以访问当前this实例)\n  created() {},\n  // 生命周期 - 挂载完成(可以访问dom元素)\n  mounted() {},\n  // 方法\n  methods: {\n    show() {\n      this.drawer = true\n    },\n    onPageChange(page) {\n      this.drawer = false\n      this.$emit('onPageChange', page)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n    width: 200px;\n    padding: 20px 15px;\n    display: flex;\n    justify-content: space-between;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PageDrawer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PageDrawer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PageDrawer.vue?vue&type=template&id=284e16ac&scoped=true&\"\nimport script from \"./PageDrawer.vue?vue&type=script&lang=js&\"\nexport * from \"./PageDrawer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PageDrawer.vue?vue&type=style&index=0&id=284e16ac&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"284e16ac\",\n  null\n  \n)\n\nexport default component.exports","export default {\n  '首页': {\n    '表单': {\n      config: [\n        {\n          name: '活动名称'\n        },\n        {\n          name: '活动区域'\n        },\n        {\n          name: '活动时间'\n        },\n        {\n          name: '即时配送'\n        },\n        {\n          name: '活动性质'\n        },\n        {\n          name: '活动形式'\n        }\n      ]\n    },\n    '操作按钮': {\n      config: [\n        {\n          name: '立即创建'\n        },\n        {\n          name: '取消'\n        }\n      ],\n      isButton: true\n    },\n    '表格': {\n      config: [\n        {\n          name: '立即创建'\n        },\n        {\n          name: '取消'\n        }\n      ]\n    }\n  },\n  '其他页面': {\n    '操作按钮': {\n      config: [\n        {\n          name: '立即创建'\n        },\n        {\n          name: '取消'\n        }\n      ],\n      isButton: true\n    },\n    '表格': {\n      config: [\n        {\n          name: '立即创建'\n        },\n        {\n          name: '取消'\n        }\n      ]\n    }\n  }\n}\n","<template>\n  <el-container class=\"container\">\n    <PageDrawer :page-list=\"pageList\" ref=\"drawer\" @onPageChange=\"onPageChange\"/>\n    <el-aside width=\"225px\">\n      <RoleItem :class=\"{active:role.id === current.id}\" :key=\"role.id\" :role=\"role\" v-for=\"role of roleList\" @onRoleChange=\"onRoleChange\"/>\n    </el-aside>\n    <el-main>\n      <el-card class=\"box-card\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>{{currentPage}}</span>\n\n          <el-button\n            style=\"float: right; padding: 3px 0;margin-left:30px; color:green;\"\n            type=\"text\"\n            @click=\"onSave\">保存</el-button>\n          <el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"$refs.drawer.show()\">切换页面</el-button>\n          <el-switch\n            style=\"float: right;\"\n            v-if=\"current.tree\"\n            v-model=\"currentRender.show\"\n          />\n        </div>\n\n        <div class=\"box\" v-if=\"current.page\">\n          <template v-for=\"(list,title) of current.page\">\n            <div v-if=\"title!== 'show'\" :key=\"title\" class=\"fied\">\n              <span class=\"title\">{{title}}</span>\n              <div class=\"item\" v-for=\"(value,key) of list.config\" :key=\"key\">\n                <span>{{key}}</span>\n\n                <div class=\"f_r\">\n                  <template v-if=\"!list.isButton\">\n                    <el-checkbox v-model=\"currentRender[title][key].show\">显示</el-checkbox>\n                    <el-checkbox v-model=\"currentRender[title][key].write\">写</el-checkbox>\n                  </template>\n\n                  <template v-else>\n                    <el-switch v-model=\"currentRender[title][key].show\">显示</el-switch>\n                  </template>\n                </div>\n              </div>\n            </div>\n          </template>\n        </div>\n      </el-card>\n    </el-main>\n  </el-container>\n</template>\n\n<script>\nimport { constructPageViewTrees, constructFullTreeByPageName } from './constructorTree'\nimport RoleItem from '@/components/roleitem/RoleItem.vue'\nimport PageDrawer from '@/components/page-drawerf/PageDrawer.vue'\n\nimport permissionTree from './tree.config'\nexport default {\n  // ComponentName 首字母大写的驼峰命名\n  name: 'PerVue',\n  // 组件\n  components: {\n    RoleItem,\n    PageDrawer\n  },\n  // 变量\n  data() {\n    return {\n      roleList: [],\n      pageList: [],\n      current: {\n        id: null,\n        username: null,\n        desc: null,\n        permission: null,\n        page: null,\n        tree: null\n      },\n      currentPage: null,\n      currentRender: null,\n      drawer: false\n    }\n  },\n  // 计算属性\n  computed: {},\n  // 监控data中的数据变化\n  watch: {},\n  // 生命周期 - 创建完成(可以访问当前this实例)\n  created() {},\n  // 生命周期 - 挂载完成(可以访问dom元素)\n  mounted() {\n    this.init()\n  },\n  // 方法\n  methods: {\n    init() {\n      this.$api.getRoleList().then(value => {\n        if (value.code !== 0) this.$message.error(value.message || '获取角色列表失败')\n        this.roleList = value.data\n        if (!value.data || this.roleList.length <= 0) return this.$message.info('未获取到角色列表')\n\n        this.initPage()\n        this.setCurrentRole(value.data[0])\n        this.setTree()\n      })\n    },\n    // 设置当前选中的角色，默认第一个 => value[0]\n    setCurrentRole(role) {\n      const { id, username, desc, permission } = role\n      this.current.id = id\n      this.current.username = username\n      this.current.desc = desc\n      this.current.permission = permission\n    },\n    initPage() {\n      const pages = Object.keys(permissionTree)\n      const firstPageName = pages[0]\n      this.setPage(firstPageName)\n    },\n    setTree() {\n      // 当前选中角色的权限\n      const currentPermission = this.current.permission\n\n      if (currentPermission.trim() === '*') {\n        this.current.tree = constructFullTreeByPageName(permissionTree, true)\n      } else {\n        this.current.tree = JSON.parse(currentPermission)\n      }\n\n      const currentPage =  this.currentPage\n      this.currentRender = this.current.tree[currentPage]\n    },\n    setPage(page) {\n      const pages = Object.keys(permissionTree)\n      const currentPage = permissionTree[page]\n      if (!currentPage) return this.$message.info('页面不存在～')\n\n      this.currentPage = page\n      this.current.page = constructPageViewTrees(currentPage)\n      this.pageList = pages\n    },\n    onPageChange(page) {\n      this.setPage(page)\n      this.setTree()\n    },\n    onRoleChange(role) {\n      this.initPage()\n      this.setCurrentRole(role)\n      this.setTree()\n    },\n    onSave() {\n      const { tree, id } = this.current\n\n      const data = {\n        id,\n        permission: JSON.stringify(tree)\n      }\n\n      this.$api.updateRole(data).then(value => {\n        if (value.code !== 0) return this.$message.error(value.message || '保存失败')\n        this.$message.success('保存成功')\n        const currentPermission = value.data.permission\n        this.current.permission = currentPermission\n        this.roleList.find(item => item.id === this.current.id).permission = currentPermission\n        this.$store.dispatch('setPermission', currentPermission)\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  margin: 0 30px;\n  height:calc(100vh - 68px);\n\n  >.el-main {\n    padding-top: 0px;\n  }\n}\n\n.box {\n  display: flex;\n  justify-content: space-around;\n  font-size: 14px;\n  .title {\n    font-size: 16px;\n    font-weight: 500;\n    color: #b6b5b5;\n  }\n\n  .item {\n    width: 200px;\n    margin: 15px 0;\n    .f_r {\n      float: right;\n    }\n  }\n}\n\n.show_page {\n  float: right;\n  margin-left: 20px;\n\n  >div {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 13px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=35d92ab6&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=35d92ab6&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"35d92ab6\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","ref","attrs","pageList","on","onPageChange","_l","roleList","role","key","id","class","active","current","onRoleChange","slot","_v","_s","currentPage","staticStyle","onSave","$event","$refs","drawer","show","tree","model","value","currentRender","callback","$$v","$set","expression","_e","page","list","title","config","isButton","write","staticRenderFns","constructPageViewTrees","firstPage","keys","Object","res","forEach","item","array2objRecursive","Array","isArray","name","constructFullTreeByPageName","t_or_f","k","buildTreeRecursive","username","desc","components","props","type","default","data","computed","watch","created","mounted","methods","$emit","component","length","RoleItem","PageDrawer","permission","init","$api","getRoleList","then","code","$message","error","message","info","initPage","setCurrentRole","setTree","pages","permissionTree","firstPageName","setPage","currentPermission","trim","JSON","parse","stringify","updateRole","success","find","$store","dispatch"],"sourceRoot":""}